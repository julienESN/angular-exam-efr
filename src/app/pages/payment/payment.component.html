<div class="payment-page container">
  <a routerLink="/panier" class="back-link">‚Üê Retour au panier</a>
  <h1>Finaliser la commande</h1>

  <div class="payment-layout">
    <!-- Left Column: Forms -->
    <div class="forms-section">
      
      <!-- Delivery Address -->
      <section class="form-block">
        <h2>Adresse de livraison</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>Pr√©nom</label>
            <input type="text" [(ngModel)]="formData.firstName" placeholder="Jean">
          </div>
          <div class="form-group">
            <label>Nom</label>
            <input type="text" [(ngModel)]="formData.lastName" placeholder="Dupont">
          </div>
          <div class="form-group full-width">
            <label>Adresse</label>
            <input type="text" [(ngModel)]="formData.address" placeholder="123 Rue de la Tech">
          </div>
          <div class="form-group">
            <label>Code Postal</label>
            <input type="text" [(ngModel)]="formData.zip" placeholder="75000">
          </div>
          <div class="form-group">
            <label>Ville</label>
            <input type="text" [(ngModel)]="formData.city" placeholder="Paris">
          </div>
        </div>
      </section>

      <!-- Payment Method -->
      <section class="form-block">
        <h2>Moyen de paiement</h2>
        <div class="payment-methods">
          <label class="method-card" [class.selected]="paymentMethod === 'card'">
            <input type="radio" name="payment" value="card" [(ngModel)]="paymentMethod">
            <span class="method-icon">üí≥</span>
            <span class="method-name">Carte Bancaire</span>
          </label>
          <label class="method-card" [class.selected]="paymentMethod === 'paypal'">
            <input type="radio" name="payment" value="paypal" [(ngModel)]="paymentMethod">
            <span class="method-icon">üÖøÔ∏è</span>
            <span class="method-name">PayPal</span>
          </label>
        </div>

        <!-- Card Details Form -->
        <div class="card-details" *ngIf="paymentMethod === 'card'">
          <div class="form-group full-width">
            <label>Num√©ro de carte</label>
            <input type="text" [(ngModel)]="formData.cardNumber" placeholder="0000 0000 0000 0000">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Expiration</label>
              <input type="text" [(ngModel)]="formData.expiry" placeholder="MM/AA">
            </div>
            <div class="form-group">
              <label>CVV</label>
              <input type="text" [(ngModel)]="formData.cvv" placeholder="123">
            </div>
          </div>
        </div>
        
        <div class="paypal-info" *ngIf="paymentMethod === 'paypal'">
          <p>Vous serez redirig√© vers PayPal pour finaliser votre paiement.</p>
        </div>
      </section>
    </div>

    <!-- Right Column: Order Summary -->
    <div class="order-summary">
      <h2>R√©capitulatif</h2>
      <div class="items-list">
        <div class="summary-item" *ngFor="let item of cartService.cartItems()">
          <span class="item-name">{{ item.quantity }}x {{ item.product.name }}</span>
          <span class="item-price">{{ item.product.price * item.quantity | currency:'EUR' }}</span>
        </div>
      </div>
      
      <div class="summary-totals">
        <div class="row">
          <span>Sous-total</span>
          <span>{{ cartService.totalPrice() | currency:'EUR' }}</span>
        </div>
        <div class="row">
          <span>Livraison</span>
          <span>Gratuit</span>
        </div>
        <div class="row total">
          <span>Total</span>
          <span>{{ cartService.totalPrice() | currency:'EUR' }}</span>
        </div>
      </div>

      <button class="pay-btn" (click)="processPayment()">
        Payer {{ cartService.totalPrice() | currency:'EUR' }}
      </button>
    </div>
  </div>
</div>
